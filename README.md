# VeePeeNet Install

Набор скриптов для установки и настройки компонентов VeePeeNet.

## Требования

1. Ubuntu Server 22.04
2. Python 3.8+
3. Интернет соединение

## Wireguard

### Возможности

- Установка VPN-сервера Wireguard
- Создание, хранение и изменение конфигурации VPN-сервера
- Добавление и удаление клиентов VPN-сервера

### Примеры использования

#### Конфигурация и добавление клиентов

```commandline
sudo python3 wireguard.py --host my.domain.com --add-clients my_client1 my_client2 --output ./my_clients
```
Скрипт установит и настроит VPN-сервер Wireguard,
создаст конфигурационные файлы клиентов **my_client1** и **my_client2** и поместит их в директорию **./my_clients**

#### Удаление клиентов

```commandline
sudo python3 wireguard.py --remove-clients my_client2
```
Скрипт удалит клиента **my_client2** и его конфигурационный файл

#### Реконфигурация с удалением предыдущей конфигурации

```commandline
sudo python3 wireguard.py --clean --host my.domain2.com --add-clients client1 client2 client3 --output ./my_clients
```
Скрипт удалит текущую конфигурацию и создаст новую

#### Получение справки

```commandline
python3 wireguard.py --help
```
Скрипт отобразит справочное сообщение

### Опции командной строки

- ```--host``` IP-адрес или DNS-имя сервера, на котором будет установлен VPN-сервер. Расчитывается автоматически.
если не указан при помощи команды ```hostname -i```. Рекомендуется указывать самостоятельно.
- ```--port``` Порт, на котором будет запущен VPN-сервер. Значение по умолчанию: 51820.
- ```--subnet``` Подсеть VPN-сервера. Значение по умолчанию: 10.9.0.1/24. Изменять не рекомендуется.
- ```--interface``` Виртуальный сетевой интерфейс VPN-сервера. Занчение по умолчанию: wg0. Изменять не рекомендуется.
- ```--dns``` Список DNS-серверов. Значение по умолчанию: 1.1.1.1 1.0.0.1.
- ```--add-clients``` Список имён клиентов, которых необходимо добавить в качестве пользователей VPN-сервера.
- ```--remove-clients``` Список клиентов, которых необходимо удалить как пользователей VPN-сервера.
- ```--output``` Путь к директории, в которую будут помещены конфигурациооные файлы клиентов.
- ```--clean``` Перезаписать текущую конфигурацию.
- ```--check``` Запуск в режиме dry-run. Отобразить все изменения в консоле.
- ```--no-ufw``` Не использовать UFW. В этом случае Вам нужно будет настроить Netfilter самостоятельно.

## Xray (Vless XTLS-Reality)

### Возможности

- Установка Xray
- Создание, хранение и изменение конфигурации Xray-сервера
- Добавление и удаление клиентов Xray-сервера

### Примеры использования

#### Конфигурация и добавление клиентов

```commandline
sudo python3 xray.py --host my.domain.com --add-clients my_client1 my_client2
```
Скрипт установит и настроит Xray-сервер,
отобразит ссылки для импорта конфигураций клиентов

#### Удаление клиентов

```commandline
sudo python3 xray.py --remove-clients my_client2
```
Скрипт удалит клиента **my_client2**

#### Реконфигурация с удалением предыдущей конфигурации

```commandline
sudo python3 xray.py --clean --host my.domain2.com --add-clients client1 client2 client3 
```
Скрипт удалит текущую конфигурацию и создаст новую

#### Получение справки

```commandline
python3 xray.py --help
```
Скрипт отобразит справочное сообщение

### Опции командной строки

- ```--host``` IP-адрес или DNS-имя сервера, на котором будет установлен Xray-сервер. Расчитывается автоматически.
если не указан при помощи команды ```hostname -i```. Рекомендуется указывать самостоятельно.
- ```--port``` Порт, на котором будет запущен VPN-сервер. Значение по умолчанию: 51820.
- ```--reality-host``` Хост, на который будет отпраляться запросы active probing. По умолчанию microsoft.com 
- ```--reality-port``` Порт, на который будет отпраляться запросы active probing. По умолчанию: 443
- ```--add-clients``` Список имён клиентов, которых необходимо добавить в качестве пользователей Xray-сервера.
- ```--remove-clients``` Список клиентов, которых необходимо удалить как пользователей Xray-сервера.
- ```--clean``` Перезаписать текущую конфигурацию.
- ```--check``` Запуск в режиме dry-run. Отобразить все изменения в консоле.
- ```--no-ufw``` Не использовать UFW. В этом случае Вам нужно будет настроить Netfilter самостоятельно.

## Лиценция
MIT
